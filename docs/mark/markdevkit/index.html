<!DOCTYPE html>
<html lang="en" dir="ltr"><head>
  <!-- Basic Page Needs -->
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  
  <meta name="description" content="Macaroni">
  <meta name="author" content="Geaaru">
  <meta name="generator" content="Hugo 0.110.0">
  
  <!-- Mobile Specific Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MARK Devkit</title>
  <link rel="icon" href="https://www.macaronios.org/images/favicon.ico">

  <!-- Twitter Bootstrs CSS -->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/bootstrap/bootstrap.min.css">
  <!-- Ionicons Fonts Css -->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/ionicons/ionicons.min.css">
  <!-- animate css -->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/animate-css/animate.css">
  <!-- Hero area slider css-->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/slider/slider.css">
  <!-- slick slider -->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/slick/slick.css">
  <!-- Fancybox -->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/facncybox/jquery.fancybox.css">
  <!-- hover -->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/hover/hover-min.css">
  <!-- template main css file -->
  
  <link rel="stylesheet" href="https://www.macaronios.org/css/style.min.css" media="screen">
  
	<!-- Custom stylesheet - for your changes -->
	
  <link rel="stylesheet" href="https://www.macaronios.org/css/custom.min.css" media="screen">
  
</head><head>
  <meta name="generator" content="Hugo 0.110.0">
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="description" content="Macaroni">
  <meta name="author" content="Geaaru">
  <meta name="generator" content="Hugo 0.110.0">

<!-- Mobile Specific Metas -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MARK Devkit</title>
<link rel="icon" href="https://www.macaronios.org/images/favicon.ico">

<!-- Twitter Bootstrs CSS -->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/bootstrap/bootstrap.min.css">
<!-- Ionicons Fonts Css -->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/ionicons/ionicons.min.css">
<!-- animate css -->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/animate-css/animate.css">
<!-- Hero area slider css-->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/slider/slider.css">
<!-- slick slider -->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/slick/slick.css">
<!-- Fancybox -->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/facncybox/jquery.fancybox.css">
<!-- hover -->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/hover/hover-min.css">
<!-- template main css file -->

<link rel="stylesheet" href="https://www.macaronios.org/css/style.min.css" media="screen">

  
<!-- Custom stylesheet - for your changes -->

<link rel="stylesheet" href="https://www.macaronios.org/css/custom.min.css" media="screen"><meta property="og:title" content="MARK Devkit" />
<meta property="og:description" content="🚀 MARK Development Kit # The mark-devkit tool is one of the core module in the MARK OS.
Autogen # The autogen command is used by M.A.R.K. workflow to autogen new ebuilds in a similar way at metatools before but with a better integration for our CD/CI chain and for a CDN / Object Store integration.
These the major differences:
it doesn&rsquo;t follow a monolitic process on autogen ebuilds. It permits defined different YAML files with a specific target Kit." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.macaronios.org/docs/mark/markdevkit/" /><meta property="article:section" content="docs" />

<meta property="og:site_name" content="Macarani OS" />
<title>MARK Devkit | Macaroni OS</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.1fa4b21f1061359ab29228c2f50810cb1387835c4b00cab20e445806bb35b02e.css" integrity="sha256-H6SyHxBhNZqykijC9QgQyxOHg1xLAMqyDkRYBrs1sC4=">
<script defer src="/en.search.min.0846eaf36f642b00cb0d46c626d12b175d0365b953820f165061281cb0d9ecf7.js" integrity="sha256-CEbq829kKwDLDUbGJtErF10DZblTgg8WUGEoHLDZ7Pc="></script>

<script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" integrity="sha256-b2&#43;Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC&#43;NdcPIvZhzk="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head><section class="top-bar animated-header">
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<nav class="navbar navbar-expand-lg navbar-light bg-light">
					<a class="navbar-brand" href="https://www.macaronios.org/">
						<img src="https://www.macaronios.org/images/logo.png" alt="Macaroni OS">
					</a>
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
						aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>

					<div class="collapse navbar-collapse" id="navigation">
						<ul class="navbar-nav ml-auto">
							
							<li class="nav-item">
								<a class="nav-link"
									href="https://www.macaronios.org/">Home</a>
							</li>
							
							
							
							<li class="nav-item">
								<a class="nav-link"
									href="https://www.macaronios.org/contact">Contacts</a>
							</li>
							
							
							
							<li class="nav-item">
								<a class="nav-link"
									href="https://www.macaronios.org/blog">Blog</a>
							</li>
							
							
							
							<li class="nav-item">
								<a class="nav-link"
									href="https://www.macaronios.org/iso/">Download</a>
							</li>
							
							
							
							<li class="nav-item">
								<a class="nav-link"
									href="https://www.macaronios.org/blog/phoenix-25.09/">Phoenix 25.09 and MARK-I 25.09 Released!</a>
							</li>
							
							
							
							<li class="nav-item">
								<a class="nav-link"
									href="https://www.macaronios.org/docs">Documentation</a>
							</li>
							
							
						</ul>
					</div>
				</nav>
			</div>
		</div>
	</div>
</section><body dir="ltr">

  <div style="margin-top: 60px;">

  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>

<div class="book-search">
  <input type="text" id="book-search-input" placeholder="" aria-label="" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  <ul>
<li>
  <a href="/docs/"><strong>The Project</strong></a>
<ul>
<li>
  <a href="/docs/#macaroni-releases">Macaroni Releases</a></li>
</ul>
</li>
<li>
  <a href="/docs/mark/"><strong>M.A.R.K.</strong></a>
<ul>
<li>
  <a href="/docs/mark/#-portage">Portage</a></li>
<li>
  <a href="/docs/mark/#-stability-levels">Stability Levels</a></li>
<li>
  <a href="/docs/mark/sambuca-diff/">MARK vs Sambuca</a></li>
<li>
  <a href="/docs/mark/phoenix2mark/">From Phoenix to MARK</a>
<ul>
<li>
  <a href="/docs/mark/phoenix2mark/#using-anise-to-restore-system">Restore System</a></li>
</ul>
</li>
<li>
  <a href="/docs/mark/contributors/">Became a Contributor</a></li>
<li>
  <a href="/docs/mark/markdevkit/"class=active>mark-devkit</a></li>
</ul>
</li>
<li>
  <a href="/docs/sambuca/"><strong>Sambuca Anise Stack</strong></a>
<ul>
<li>
  <a href="/docs/sambuca/#macaroni-os-phoenix">Phoenix</a></li>
<li>
  <a href="/docs/sambuca/#macaroni-os-eagle">Eagle</a></li>
<li>
  <a href="/docs/sambuca/#macaroni-os-terragon">Terragon</a></li>
<li>
  <a href="/docs/sambuca/#macaroni-repositories">Anise Repositories</a></li>
<li>
  <a href="/docs/sambuca/#macaroni-tags">Macaroni Tags</a></li>
</ul>
</li>
<li>
  <a href="/docs/story/"><strong>The Story</strong></a></li>
<li>
  <a href="/docs/getting-started/"><strong>Getting Started</strong></a>
<ul>
<li>
  <a href="/docs/getting-started/#install-macaroni-iso">Install Macaroni ISO</a></li>
<li>
  <a href="/docs/getting-started/#install-macaroni-lxd-containers">Install Macaroni LXD Containers</a></li>
<li>
  <a href="/docs/getting-started/#install-macaroni-incus-containers">Install Macaroni Incus Containers</a></li>
<li>
  <a href="/docs/getting-started/#install-macaroni-docker-containers">Install Macaroni Docker Containers</a></li>
<li>
  <a href="/docs/networking/">Networking</a></li>
</ul>
</li>
<li>
  <a href="/docs/pms/"><strong>Anise</strong></a>
<ul>
<li>
  <a href="/docs/pms/#1-repositories-or-wagons">Repositories or Wagons</a></li>
<li>
  <a href="/docs/pms/#2-subsets">Subsets</a></li>
<li>
  <a href="/docs/pms/#3-search-packages">Search Packages</a></li>
<li>
  <a href="/docs/pms/#4-install-packages">Install Packages</a></li>
<li>
  <a href="/docs/pms/#6-uninstall-packages">Uninstall Packages</a></li>
<li>
  <a href="/docs/pms/#7-upgrade-the-system">Upgrade System</a></li>
<li>
  <a href="/docs/pms/#91-show-files-owned-by-a-specific-package">Show files owned by a specific package</a></li>
<li>
  <a href="/docs/pms/#92-resolve-what-package-a-file-belongs-to">Resolve what package a file belongs to</a></li>
<li>
  <a href="/docs/pms/#93-show-orphans-packages">Show orphans Packages</a></li>
<li>
  <a href="/docs/pms/#10-local-database-operations">Local Database Operations</a></li>
<li>
  <a href="/docs/pms/#11-masking-packages">Masking Packages</a>
<br /></li>
</ul>
</li>
</ul>
<br />






  
<ul>
  
  <li>
    <a href="/blog/" >
        Blog
      </a>
  </li>
  
  <li>
    <a href="https://github.com/macaroni-os" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page" >
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>MARK Devkit</strong>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
  <article class="markdown"><h1 id="-mark-development-kit">
  🚀 MARK Development Kit
  <a class="anchor" href="#-mark-development-kit">#</a>
</h1>
<p>The <code>mark-devkit</code> tool is one of the core module in the MARK OS.</p>
<h1 id="autogen">
  Autogen
  <a class="anchor" href="#autogen">#</a>
</h1>
<p>The <code>autogen</code> command is used by M.A.R.K. workflow to autogen new ebuilds in a similar way at
metatools before but with a better integration for our CD/CI chain and for a CDN / Object Store
integration.</p>
<p>These the major differences:</p>
<ul>
<li>
<p>it doesn&rsquo;t follow a monolitic process on autogen ebuilds. It permits defined different YAML
files with a specific target Kit. The defined YAML could be elaborated in parallel on different
distributed nodes.</p>
</li>
<li>
<p>it doesn&rsquo;t need a specific path for the YAML files that could be called with different names.</p>
</li>
<li>
<p>it manages the autogen process like a step to use together with the process defined in the
<code>kit merge</code> command. In particular, it generates the defined ebuilds in a source directoty
that is later merged to the target kit as direct commit or as PR but as additional version
to existing version. It doesn&rsquo;t replace the existing version.</p>
</li>
<li>
<p>the <em>generator</em> component doesn&rsquo;t defined a complete process that describe the full
generation process, but it used to define the searching data step about availables versions
of a specific package and later describe how define artefacts to use after the core logic
(transforms, selector) is been executed. This permits to implement easily new generator and
to use existing core software for common operations (fetching, hashing, sync, etc).</p>
</li>
<li>
<p>it permits to use different render engines:</p>
<ul>
<li><code>helm</code>: golang engine used by K8S and based on sprig</li>
<li><code>pongo2</code>: golang engine that uses a django/jinja similar syntax</li>
<li><code>j2cli</code>: python jinja2 engine that uses the <code>j2cli</code> tool and that permits to define custom
macro to use on template.</li>
</ul>
</li>
<li>
<p>it uses a <code>flat</code> distfiles paradigm to store tarballs. It uses the feature available
in the <code>distfiles-sync</code> command too, to deploy to a specific directory or to a specific S3
Object Storage like Minio, Ceph, etc.</p>
</li>
<li>
<p>inside the specfile used to define the package to autogen it permits to use Helm engine too
for specific fields in order to render the string based on the metadata retrieved.
These fields are:</p>
<ul>
<li><em>asset name</em>: The asset name is the name used as target distfiles.</li>
<li><em>asset url</em>: used on <em>builtin-noop</em> generator to defined the url of the artefact</li>
<li><em>asset prefix</em>: used on <em>builtin-dirlisting</em> generator to define the prefix path to use
on download the tarball of the package.</li>
<li><em>tarball</em>: used to override the name of the distfiles file when there aren&rsquo;t assets.</li>
</ul>
</li>
</ul>
<p>The <code>autogen</code> command needs at least two specific flags: <code>--specfile &lt;file&gt;</code> to pass the name
of the file with YAML specs of the packages to autogen, <code>--kitfile &lt;file&gt;</code> used to retrieve
the metadata of the target kit.</p>
<h2 id="generators">
  Generators
  <a class="anchor" href="#generators">#</a>
</h2>
<p>The generator availables at the moment are:</p>
<ul>
<li>
<p><code>builtin-github</code>: This generator permits to use GitHub API to retrieve tags or releases
available for a specific repository and get the last and/or a specific version.</p>
</li>
<li>
<p><code>builtin-dirlisting</code>: this generator permits to using HTML indexes page and retrieve
tarballs available for a specific package.</p>
</li>
<li>
<p><code>builtin-noop</code>: this generator permits to define static versions and/or snapshot.</p>
</li>
<li>
<p><code>builtin-pypi</code>: this generator permits to use Pypi JSON API to retrieve releases</p>
</li>
<li>
<p><code>builtin-json</code>: this generator permits to parse JSON remote content and retrieve
the list of versions availables using JSONPath syntax.</p>
</li>
<li>
<p><code>custom</code>: this generator permits to call external script (Bash, Python, etc.) and
generate ebuild and Manifest.</p>
</li>
</ul>
<h2 id="extensions">
  Extensions
  <a class="anchor" href="#extensions">#</a>
</h2>
<p>In order to manage special packages where it&rsquo;s needed to add additional tarballs,
for example with Golang vendor dependencies it&rsquo;s possible to use the <em>extensions</em>.
The availables <em>extensions</em> at the moment are:</p>
<ul>
<li>
<p><code>custom</code>: this extension permits to run external script (Bash, Python, etc.)
and generate additional tarballs for the generated package.</p>
</li>
<li>
<p><code>golang</code>: this extention like before in metatools generates the Golang vendor
bundle tarballs to use with packages without <em>vendor</em> directory.</p>
</li>
<li>
<p><code>rust</code>: this extension generates the Rust crates bundle tarballs.</p>
</li>
<li>
<p><code>git-submodules</code>: this extension generates the bundle tarballs with the
files of the git submodules used in the upstream project.</p>
</li>
</ul>
<h2 id="definitions">
  Definitions
  <a class="anchor" href="#definitions">#</a>
</h2>
<p>In the <em>autogen</em> language every block of YAML is called <em>definition</em> and is managed
by a map that has as values the following informations:</p>
<ul>
<li><code>generator</code>: the name of the generator to use.</li>
<li><code>template</code>: the name of the template engine to use: <em>helm</em>, <em>pongo2</em>, <em>j2cli</em>.</li>
<li><code>defaults</code>: the defaults section permits to define attributes to apply to all
packages to autogen for the specific <em>definition</em>.</li>
<li><code>packages</code>: the list of the packages to autogen as a map where the key is the name
of the package and the values are the configuration options with custom options based
on the used generator.</li>
<li><code>transform</code>: as a value of a specific atom, it permits to define multiple transform
rules (at the moment only of kind <em>string</em>) to clean the existing version from data
not usable for version string parsing.</li>
<li><code>selector</code>: as a value of a specific atom, it permits to define condition (in and)
about the version to select.</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">macaroni</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">generator</span>: <span style="color:#ae81ff">builtin-github</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">engine</span>: <span style="color:#ae81ff">helm</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">defaults</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">category</span>: <span style="color:#ae81ff">dev-util</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">github</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">user</span>: <span style="color:#ae81ff">macaroni-os</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">query</span>: <span style="color:#ae81ff">releases</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">packages</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">mark-devkit</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">template</span>: <span style="color:#ae81ff">templates/mark-devkit-custom.tmpl</span>
</span></span></code></pre></div><p>By default if the <code>template</code> attribute is not defined the tools search in the
directory of the specfiles following the convention: <code>templates/&lt;aton-name&gt;.tmpl</code>.</p>
<pre tabindex="0"><code>$&gt; mark-devkit autogen --help
Executes Autogen elaboration.

Usage:
   autogen [flags]

Aliases:
  autogen, a

Flags:
      --backend string             Set the fetcher backend to use: dir|s3. (default &#34;dir&#34;)
      --concurrency int            Define the elaboration concurrency. (default 3)
      --deep int                   Define the limit of commits to fetch. (default 5)
      --download-dir string        Override the default ${workdir}/downloads directory.
      --github-user string         Override the default Github user used for PR.
  -h, --help                       help for autogen
      --keep-workdir               Avoid to remove the working directory.
  -k, --kitfile string             The YAML with the target kit definition.
      --minio-bucket string        Set minio bucket to use or set env MINIO_BUCKET.
      --minio-endpoint string      Set minio endpoint to use or set env MINIO_URL.
      --minio-keyid string         Set minio Access Key to use or set env MINIO_ID.
      --minio-prefix string        Set the prefix path to use or set env MINIO_PREFIX. Note: The path is without initial /.
      --minio-region string        Optionally define the minio region.
      --minio-secret string        Set minio Access Key to use or set env MINIO_SECRET.
      --pr                         Push commit over specific branch and as Pull Request.
      --push                       Push commits to origin.
      --show-values                For debug purpose print generated values for any elaborated package in YAML format.
      --signature-email string     Specify the email of the user for the commits.
      --signature-name string      Specify the name of the user for the commits.
      --skip-merge                 Just generate the ebuild without merge to target kit. To use with --keep-workdir.
      --skip-pull-sources          Skip pull of sources repositories.
      --skip-reposcan-generation   Skip reposcan files generation.
      --specfile string            The specfile with the rules of the packages to autogen.
      --sync                       Sync artefacts to S3 backend server. (default true)
      --to string                  Override default work directory. (default &#34;workdir&#34;)
      --verbose                    Show additional informations.

Global Flags:
  -c, --config string   MARK Devkit configuration file
  -d, --debug           Enable debug output.
</code></pre><h1 id="autogen-thin-aka-doit">
  Autogen Thin a.k.a. <code>doit</code>
  <a class="anchor" href="#autogen-thin-aka-doit">#</a>
</h1>
<p>To help developers and contributors this command permits to execute a subset of the
steps of the <code>autogen</code> command. In particular, it used to generates locally the new ebuilds
without the other steps (merging, sync, etc.).</p>
<pre tabindex="0"><code>$&gt; mark-devkit doit --help
Executes minimal Autogen elaboration for testing purpose.

Usage:
   autogen-thin [flags]

Aliases:
  autogen-thin, doit

Flags:
      --concurrency int       Define the elaboration concurrency. (default 3)
      --deep int              Define the limit of commits to fetch. (default 5)
      --download-dir string   Override the default ${workdir}/downloads directory.
  -h, --help                  help for autogen-thin
  -k, --kitfile string        The YAML with the target kit definition.
      --show-values           For debug purpose print generated values for any elaborated package in YAML format.
      --specfile string       The specfile with the rules of the packages to autogen.
      --to string             Override default work directory. (default &#34;workdir&#34;)
      --verbose               Show additional informations.

Global Flags:
  -c, --config string   MARK Devkit configuration file
  -d, --debug           Enable debug output.
</code></pre><p>Considering the following examples of spec file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># file myspec.yml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">x11libs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">generator</span>: <span style="color:#ae81ff">builtin-noop</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">engine</span>: <span style="color:#ae81ff">helm</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">defaults</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">category</span>: <span style="color:#ae81ff">x11-libs</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">packages</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">libX11</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">vars</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">desc</span>: <span style="color:#e6db74">&#34;X.Org X11 library&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">versions</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;1.8.1&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">assets</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;libX11-{{ .Values.version}}.tar.xz&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">prefix</span>: <span style="color:#ae81ff">https://www.x.org/releases/individual/lib/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">libX11</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">vars</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">desc</span>: <span style="color:#e6db74">&#34;X.Org X11 library&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">versions</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#e6db74">&#34;1.7.0&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">assets</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;libX11-{{ .Values.version}}.tar.bz2&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">prefix</span>: <span style="color:#ae81ff">https://www.x.org/releases/individual/lib/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">metatools</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">category</span>: <span style="color:#ae81ff">sys-apps</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">vars</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">github_user</span>: <span style="color:#ae81ff">macaroni-os</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">github_repo</span>: <span style="color:#ae81ff">funtoo-metatools</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">homepage</span>: <span style="color:#ae81ff">https://github.com/macaroni-os/funtoo-metatools</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">license</span>: <span style="color:#ae81ff">Apache-2.0</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">desc</span>: <span style="color:#e6db74">&#34;M.A.R.K. metatools -- autogeneration framework.&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">versions</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">1.3</span><span style="color:#ae81ff">.8_pre20240818</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">snapshot</span>: <span style="color:#ae81ff">3ca77d7dac6b9256e161d0bce47c7f7eb85e6e96</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">assets</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;{{ .Values.pn }}-{{ .Values.version }}-{{ substr 0 7 .Values.snapshot }}.zip&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://github.com/{{ .Values.github_user }}/{{ .Values.github_repo }}/archive/{{ .Values.snapshot }}.zip&#34;</span>
</span></span></code></pre></div><p>and the following kit file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># cat merge.kit.d/test.yml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">sources</span>:
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We need this to inherit the eclass used for kit cache JSON generation</span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;core-kit&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://github.com/macaroni-os/core-kit&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">branch</span>: <span style="color:#e6db74">&#34;mark-testing&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">target</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">test-kit</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://github.com/macaroni-os/test-kit&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">branch</span>: <span style="color:#ae81ff">mark-labs</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">fixups</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">include</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">file</span>: <span style="color:#ae81ff">../../LICENSE</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">to</span>: <span style="color:#ae81ff">LICENSE</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">file</span>: <span style="color:#ae81ff">../../.github/FUNDING.yml</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">to</span>: <span style="color:#ae81ff">.github/FUNDING.yml</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">atoms_defaults</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">max_versions</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">atoms</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">pkg</span>: <span style="color:#ae81ff">sys-apps/metatools</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">pkg</span>: <span style="color:#ae81ff">x11-libs/libX11</span>
</span></span></code></pre></div><p>The command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$&gt; mark-devkit doit --specfile myspec.yml --kitfile merge.kit.d/test.yml --show-values
</span></span><span style="display:flex;"><span>😷 Loading specfile contrib/autogen/noop_example.yml
</span></span><span style="display:flex;"><span>🏰 Work directory:	workdir
</span></span><span style="display:flex;"><span>🚀 Target Kit:		mark-kit
</span></span><span style="display:flex;"><span>🏭 <span style="color:#f92672">[</span>x11libs<span style="color:#f92672">]</span> Processing definition ...
</span></span><span style="display:flex;"><span>🏭 <span style="color:#f92672">[</span>x11libs<span style="color:#f92672">]</span> Processing atom libX11...
</span></span><span style="display:flex;"><span>🍕 <span style="color:#f92672">[</span>libX11<span style="color:#f92672">]</span> For package x11-libs/libX11 selected version 1.8.1
</span></span><span style="display:flex;"><span>👀 <span style="color:#f92672">[</span>libX11<span style="color:#f92672">]</span> Values:
</span></span><span style="display:flex;"><span>category: x11-libs
</span></span><span style="display:flex;"><span>desc: X.Org X11 library
</span></span><span style="display:flex;"><span>original_version: 1.8.1
</span></span><span style="display:flex;"><span>pn: libX11
</span></span><span style="display:flex;"><span>version: 1.8.1
</span></span><span style="display:flex;"><span>versions:
</span></span><span style="display:flex;"><span>    - 1.8.1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>🏭 <span style="color:#f92672">[</span>x11libs<span style="color:#f92672">]</span> Processing atom libX11...
</span></span><span style="display:flex;"><span>🍕 <span style="color:#f92672">[</span>libX11<span style="color:#f92672">]</span> For package x11-libs/libX11 selected version 1.7.0
</span></span><span style="display:flex;"><span>👀 <span style="color:#f92672">[</span>libX11<span style="color:#f92672">]</span> Values:
</span></span><span style="display:flex;"><span>category: x11-libs
</span></span><span style="display:flex;"><span>desc: X.Org X11 library
</span></span><span style="display:flex;"><span>original_version: 1.7.0
</span></span><span style="display:flex;"><span>pn: libX11
</span></span><span style="display:flex;"><span>version: 1.7.0
</span></span><span style="display:flex;"><span>versions:
</span></span><span style="display:flex;"><span>    - 1.7.0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>🏭 <span style="color:#f92672">[</span>x11libs<span style="color:#f92672">]</span> Processing atom metatools...
</span></span><span style="display:flex;"><span>🍕 <span style="color:#f92672">[</span>metatools<span style="color:#f92672">]</span> For package sys-apps/metatools selected version 1.3.8_pre20240818
</span></span><span style="display:flex;"><span>👀 <span style="color:#f92672">[</span>metatools<span style="color:#f92672">]</span> Values:
</span></span><span style="display:flex;"><span>category: sys-apps
</span></span><span style="display:flex;"><span>desc: M.A.R.K. metatools -- autogeneration framework.
</span></span><span style="display:flex;"><span>github_repo: funtoo-metatools
</span></span><span style="display:flex;"><span>github_user: macaroni-os
</span></span><span style="display:flex;"><span>homepage: https://github.com/macaroni-os/funtoo-metatools
</span></span><span style="display:flex;"><span>license: Apache-2.0
</span></span><span style="display:flex;"><span>original_version: 1.3.8_pre20240818
</span></span><span style="display:flex;"><span>pn: metatools
</span></span><span style="display:flex;"><span>snapshot: 3ca77d7dac6b9256e161d0bce47c7f7eb85e6e96
</span></span><span style="display:flex;"><span>version: 1.3.8_pre20240818
</span></span><span style="display:flex;"><span>versions:
</span></span><span style="display:flex;"><span>    - 1.3.8_pre20240818
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>🎉 All <span style="color:#66d9ef">done</span>
</span></span></code></pre></div><p>This command generates under the <em>workdir</em> (managed by the <code>--to</code> flag) the following files:</p>
<pre tabindex="0"><code>$&gt; tree workdir/
workdir/
├── downloads
│   ├── libX11-1.7.0.tar.bz2
│   ├── libX11-1.8.1.tar.xz
│   └── metatools-1.3.8_pre20240818-3ca77d7.zip
└── sources
    └── mark-kit
        ├── sys-apps
        │   └── metatools
        │       ├── Manifest
        │       └── metatools-1.3.8_pre20240818.ebuild
        └── x11-libs
            └── libX11
                ├── Manifest
                ├── libX11-1.7.0.ebuild
                └── libX11-1.8.1.ebuild

7 directories, 8 files
</code></pre><p>Under <code>downloads</code> the tarballs of the artefacts elaborated and under <code>sources</code> the directory
of the target kit with the new ebuilds.</p>
<p>The flag <code>--show-values</code> is a good debugging tool to show what versions are been retrieved
and later elaborated.</p>
<h1 id="kit-merge">
  Kit Merge
  <a class="anchor" href="#kit-merge">#</a>
</h1>
<p>The <code>kit merge</code> command permits to generate and update a specific kit
with the <em>atoms</em> defined in YAML files reading the ebuild from external
repository or different kits and branches.</p>
<p>The Github Token is read from <code>GITHUB_TOKEN</code> environment variable.</p>
<pre tabindex="0"><code>$&gt; mark-devkit kit merge --help
Merge packages between kits.

Usage:
   kit merge [flags]

Aliases:
  merge, m, me

Flags:
      --concurrency int            Define the elaboration concurrency. (default 3)
      --deep int                   Define the limit of commits to fetch. (default 5)
      --github-user string         Override the default Github user used for PR.
  -h, --help                       help for merge
      --keep-workdir               Avoid to remove the working directory.
      --pr                         Push commit over specific branch and as Pull Request.
      --push                       Push commits to origin.
      --signature-email string     Specify the email of the user for the commits.
      --signature-name string      Specify the name of the user for the commits.
      --skip-pull-sources          Skip pull of sources repositories.
      --skip-reposcan-generation   Skip reposcan files generation.
      --specfile string            The specfiles of the jobs.
      --to string                  Override default work directory. (default &#34;workdir&#34;)
      --verbose                    Show additional informations.

Global Flags:
  -c, --config string   MARK Devkit configuration file
  -d, --debug           Enable debug output.
</code></pre><p>These the main features:</p>
<ul>
<li>generation and update of the profiles directory of the target kit: (categories, repo_name, thirdpartymirrors, etc.)</li>
<li>generation and update of the metadata directory of the target kit</li>
<li>generation and update of the eclass directory of the target kit</li>
<li>automatic merge of the defined packages in the YAML file (optionally with specific conditions)
from sources kit to the target kit. The last version ebuild is merged.</li>
<li>automatic bump with a new revision of existing ebuild with changes</li>
<li>generate and update static directories defined in the YAML file.</li>
<li>permits to merge changes as direct commits in the target kit branch or through Github PR.</li>
</ul>
<pre tabindex="0"><code>$&gt; mark-devkit kit merge --help
Merge packages between kits.

Usage:
   kit merge [flags]

Aliases:
  merge, m, me

Flags:
      --concurrency int            Define the elaboration concurrency. (default 3)
      --deep int                   Define the limit of commits to fetch. (default 5)
  -h, --help                       help for merge
      --push                       Push commits to origin.
      --signature-email string     Specify the email of the user for the commits.
      --signature-name string      Specify the name of the user for the commits.
      --skip-pull-sources          Skip pull of sources repositories.
      --skip-reposcan-generation   Skip reposcan files generation.
      --specfile string            The specfiles of the jobs.
      --to string                  Override default work directory. (default &#34;workdir&#34;)
      --verbose                    Show additional informations.

Global Flags:
  -c, --config string   MARK Devkit configuration file
  -d, --debug           Enable debug output.
</code></pre><p>Example:</p>
<pre tabindex="0"><code>$&gt; mark-devkit kit merge --config contrib/config.yml --specfile ~/dev/macaroni/kit-fixups/core-kit/merge.kit.d/core.yml \
    --concurrency 10 --verbose --signature-email &#34;mark-bot@macaronios.org&#34; --signature-name &#34;MARK Bot&#34;
</code></pre><h1 id="kit-clean">
  Kit clean
  <a class="anchor" href="#kit-clean">#</a>
</h1>
<p>The <code>kit clean</code> command permits to purge old ebuilds.</p>
<pre tabindex="0"><code>$&gt; mark-devkit kit clean --help
Clean old packages from kits.

Usage:
   kit clean [flags]

Aliases:
  clean, purge, c

Flags:
      --concurrency int            Define the elaboration concurrency. (default 3)
      --deep int                   Define the limit of commits to fetch. (default 5)
      --github-user string         Override the default Github user used for PR.
  -h, --help                       help for clean
      --keep-workdir               Avoid to remove the working directory.
      --pr                         Push commit over specific branch and as Pull Request.
      --push                       Push commits to origin.
      --signature-email string     Specify the email of the user for the commits.
      --signature-name string      Specify the name of the user for the commits.
      --skip-pull-sources          Skip pull of sources repositories.
      --skip-reposcan-generation   Skip reposcan files generation.
      --specfile string            The specfiles of the jobs.
      --to string                  Override default work directory. (default &#34;workdir&#34;)
      --verbose                    Show additional informations.

Global Flags:
  -c, --config string   MARK Devkit configuration file
  -d, --debug           Enable debug output.
</code></pre><p>The Github Token is read from <code>GITHUB_TOKEN</code> environment variable.</p>
<p>The number of ebuilds maintained depends on <em>default</em> versions defined in the YAML
as <code>atoms_defaults</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">target</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">atoms_defaults</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">max_versions</span>: <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><p>or directly as custom field <em>max_versions</em> of the defined package:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">target</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">atoms</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">pkg</span>: <span style="color:#ae81ff">dev-util/mark-devkit</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">max_versions</span>: <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><p>and if it&rsquo;s been pinned a specific version:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">target</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">atoms</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">pkg</span>: <span style="color:#ae81ff">dev-util/mark-devkit</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">versions</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#e6db74">&#34;0.8.0&#34;</span>
</span></span></code></pre></div><p>Example:</p>
<pre tabindex="0"><code>$&gt; mark-devkit kit clean --config contrib/config.yml --specfile ~/dev/macaroni/kit-fixups/mark-kit/merge.kit.d/macaroni.yml \
    --concurrency 10 --verbose --signature-email &#34;mark-bot@macaronios.org&#34; --signature-name &#34;MARK bot&#34; --pr --push
</code></pre><h1 id="kit-distfiles-sync">
  Kit distfiles-sync
  <a class="anchor" href="#kit-distfiles-sync">#</a>
</h1>
<p>The <code>kit distfiles-sync</code> permits to generate and/or sync the distfiles mirror as <em>flat</em> mode.</p>
<pre tabindex="0"><code>$&gt; mark-devkit kit distfiles-sync --help
Sync distfiles for a list of kits.

Usage:
   kit distfiles-sync [flags]

Aliases:
  distfiles-sync, ds, distfiles

Flags:
      --backend string              Set the fetcher backend to use: dir|s3. (default &#34;dir&#34;)
      --check-only-size             Just compare file size without MD5 checksum.
      --concurrency int             Define the elaboration concurrency. (default 3)
  -h, --help                        help for distfiles-sync
      --keep-workdir                Avoid to remove the working directory.
      --minio-bucket string         Set minio bucket to use or set env MINIO_BUCKET.
      --minio-endpoint string       Set minio endpoint to use or set env MINIO_URL.
      --minio-keyid string          Set minio Access Key to use or set env MINIO_ID.
      --minio-prefix string         Set the prefix path to use or set env MINIO_PREFIX. Note: The path is without initial /.
      --minio-region string         Optionally define the minio region.
      --minio-secret string         Set minio Access Key to use or set env MINIO_SECRET.
      --pkg stringArray             Sync only specified packages.
      --show-summary                Show YAML/JSON summary results
      --skip-reposcan-generation    Skip reposcan files generation.
      --specfile string             The specfiles of the jobs.
      --summary-format string       Specificy the summary format: json|yaml (default &#34;yaml&#34;)
      --to string                   Override default work directory. (default &#34;workdir&#34;)
      --verbose                     Show additional informations.
      --write-summary-file string   Write the sync summary to the specified file in YAML/JSON format.

Global Flags:
  -c, --config string   MARK Devkit configuration file
  -d, --debug           Enable debug output.
</code></pre><p>It supports two backends:</p>
<ul>
<li>
<p><code>dir</code>: It syncs tarballs to a filesystem directory</p>
</li>
<li>
<p><code>s3</code>: It syncs tarballs to an S3/Minio/Ceph Object Store. Considering that the S3 doesn&rsquo;t share
a specific hash of the target object <code>mark-devkit</code> sets custom Metadata attributes with the
tarball BLAKE2B and/or SHA512 hashes.</p>
</li>
</ul>
<p>It permits to defined additional mirrors where download tarballs if the main URLs are no more valid
with different layouts: <em>flat</em> or <em>content-hash</em>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">fallback_mirrors</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">alias</span>: <span style="color:#ae81ff">macaroni-cdn-hash</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">uri</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">https://distfiles.macaronios.org/distfiles</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">https://distfiles-flat.macaronios.org/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">layout</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">modes</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">type</span>: <span style="color:#e6db74">&#34;content-hash&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">hash</span>: <span style="color:#e6db74">&#34;SHA512&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">hash_mode</span>: <span style="color:#e6db74">&#34;8:8:8&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">alias</span>: <span style="color:#ae81ff">macaroni-cdn-flat</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">uri</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">https://distfiles-flat.macaronios.org/distfiles</span>
</span></span></code></pre></div><h1 id="kit-bump-release">
  Kit bump-release
  <a class="anchor" href="#kit-bump-release">#</a>
</h1>
<p>The command <code>kit bump-release</code> permits to bump a revision to a specific <code>meta-repo</code>.</p>
<p>The <code>meta-repo</code> is used by <em>ego</em> to sync kits.</p>
<pre tabindex="0"><code>$&gt; mark-devkit kit bump-release --help
Bump a new kits release.

Usage:
   kit bump-release [flags]

Aliases:
  bump-release, br, bump, release

Flags:
      --deep int                 Define the limit of commits to fetch. (default 5)
  -h, --help                     help for bump-release
      --push                     Push commits to origin.
      --signature-email string   Specify the email of the user for the commits.
      --signature-name string    Specify the name of the user for the commits.
      --specfile string          The specfiles of the jobs.
      --to string                Override default work directory. (default &#34;workdir&#34;)
      --verbose                  Show additional informations.

Global Flags:
  -c, --config string   MARK Devkit configuration file
  -d, --debug           Enable debug output.
</code></pre><h1 id="kit-clone">
  Kit clone
  <a class="anchor" href="#kit-clone">#</a>
</h1>
<p>The command <code>kit clone</code> permits to clone a list of kits and optionally generate:</p>
<ul>
<li>
<p>a YAML file with the list of the kits and the hash of the last commit</p>
</li>
<li>
<p>generate the <em>reposcan</em> JSON files through the <em>anise-portage-converter</em> tool.</p>
</li>
</ul>
<pre tabindex="0"><code>mark-devkit kit clone --help
Clone/Sync kits locally from a YAML specs rules file.

Usage:
   kit clone [flags]

Aliases:
  clone, c, cl, sync

Flags:
      --concurrency int             Define the elaboration concurrency. (default 3)
      --deep int                    Define the limit of commits to fetch. (default 5)
      --generate-reposcan-files     Generate reposcan files of the pulled kits.
  -h, --help                        help for clone
      --kit-cache-dir string        Directory where generate reposcan files. (default &#34;kit-cache&#34;)
      --show-summary                Show YAML summary results
      --single-branch               Pull only the used branch. (default true)
      --specfile string             The specfiles of the jobs.
      --to string                   Target dir where sync kits. (default &#34;output&#34;)
      --verbose                     Show additional informations.
      --write-summary-file string   Write the sync summary to the specified file in YAML format.

Global Flags:
  -c, --config string   MARK Devkit configuration file
  -d, --debug           Enable debug output.
</code></pre><h1 id="metro-run">
  Metro run
  <a class="anchor" href="#metro-run">#</a>
</h1>
<p>The command <code>metro run</code> replace the Funtoo <em>metro</em> tool and permit to generate Stage tarballs.</p>
<pre tabindex="0"><code>$&gt; mark-devkit metro run --help
Run one or more job.

Usage:
   metro run [flags]

Aliases:
  run, r, j

Flags:
      --cleanup             Cleanup rootfs directory. (default true)
      --cpu string          Specify specific CPU type for QEMU to use
      --fchroot-debug       Enable debug on fchroot.
  -h, --help                help for run
      --job string          The job to diagnose.
      --quiet               Avoid to see the hooks command output.
      --skip-hooks-phase    Skip hooks executions. For development only.
      --skip-packer-phase   Skip packer phase.
      --skip-source-phase   Skip source phase.
      --specfile string     The specfiles of the jobs.

Global Flags:
  -c, --config string   MARK Devkit configuration file
  -d, --debug           Enable debug output.
</code></pre><p>See 
  <a href="https://github.com/macaroni-os/mark-stages">mark-stages</a> repository for the documentation.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





  <div>
    <a class="flex align-center" href="https://github.com/macaroni-os/macaroni-site/edit/master/site/content/docs/mark/markdevkit.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span></span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  </main>

  

  </div><!-- Footer Section Start -->
<footer id="footer">
  <div class="container">
    <div class="row content-justify-between">
      <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
        <p class="copyright">Copyright:
          <span>
            <script>
              document.write(new Date().getFullYear())
            </script>
          </span> Daniele Rondina All Rights Reserved
        </p>
      </div>
      <div class="col-md-4 col-12">
        <!-- Social Media -->
        <ul class="social text-center text-md-right text-lg-right">
          
          <li><a href="https://github.com/macaroni-os"><i class="ion-social-github"></i></a></li>
          
          <li><a href="https://discord.gg/AMuVCRZEvG"><i class="ion-chatbox"></i></a></li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://www.macaronios.org/plugins/jQurey/jquery.min.js"></script>
<!-- slick slider -->
<script src="https://www.macaronios.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://www.macaronios.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- wow js -->
<script src="https://www.macaronios.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://www.macaronios.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://www.macaronios.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://www.macaronios.org/js/script.min.js"></script>
<!-- google analitycs -->
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'Your ID', 'auto');
  ga('send', 'pageview');
</script>
</body>

</html>












