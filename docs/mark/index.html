<!DOCTYPE html>
<html lang="en" dir="ltr"><head>
  <!-- Basic Page Needs -->
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  
  <meta name="description" content="Macaroni">
  <meta name="author" content="Geaaru">
  <meta name="generator" content="Hugo 0.110.0">
  
  <!-- Mobile Specific Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MARK Stack</title>
  <link rel="icon" href="https://www.macaronios.org/images/favicon.ico">

  <!-- Twitter Bootstrs CSS -->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/bootstrap/bootstrap.min.css">
  <!-- Ionicons Fonts Css -->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/ionicons/ionicons.min.css">
  <!-- animate css -->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/animate-css/animate.css">
  <!-- Hero area slider css-->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/slider/slider.css">
  <!-- slick slider -->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/slick/slick.css">
  <!-- Fancybox -->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/facncybox/jquery.fancybox.css">
  <!-- hover -->
  <link rel="stylesheet" href="https://www.macaronios.org/plugins/hover/hover-min.css">
  <!-- template main css file -->
  
  <link rel="stylesheet" href="https://www.macaronios.org/css/style.min.css" media="screen">
  
	<!-- Custom stylesheet - for your changes -->
	
  <link rel="stylesheet" href="https://www.macaronios.org/css/custom.min.css" media="screen">
  
</head><head>
  <meta name="generator" content="Hugo 0.110.0">
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="description" content="Macaroni">
  <meta name="author" content="Geaaru">
  <meta name="generator" content="Hugo 0.110.0">

<!-- Mobile Specific Metas -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MARK Stack</title>
<link rel="icon" href="https://www.macaronios.org/images/favicon.ico">

<!-- Twitter Bootstrs CSS -->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/bootstrap/bootstrap.min.css">
<!-- Ionicons Fonts Css -->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/ionicons/ionicons.min.css">
<!-- animate css -->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/animate-css/animate.css">
<!-- Hero area slider css-->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/slider/slider.css">
<!-- slick slider -->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/slick/slick.css">
<!-- Fancybox -->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/facncybox/jquery.fancybox.css">
<!-- hover -->
<link rel="stylesheet" href="https://www.macaronios.org/plugins/hover/hover-min.css">
<!-- template main css file -->

<link rel="stylesheet" href="https://www.macaronios.org/css/style.min.css" media="screen">

  
<!-- Custom stylesheet - for your changes -->

<link rel="stylesheet" href="https://www.macaronios.org/css/custom.min.css" media="screen"><meta property="og:title" content="MARK Stack" />
<meta property="og:description" content="Macaroni" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.macaronios.org/docs/mark/" /><meta property="og:site_name" content="Macarani OS" />
<title>MARK Stack | Macaroni OS</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.1fa4b21f1061359ab29228c2f50810cb1387835c4b00cab20e445806bb35b02e.css" integrity="sha256-H6SyHxBhNZqykijC9QgQyxOHg1xLAMqyDkRYBrs1sC4=">
<script defer src="/en.search.min.ff43ec55442abb3eadc135831adf9d3ae64bf7eb286692091f26e4e99db7df0b.js" integrity="sha256-/0PsVUQquz6twTWDGt&#43;dOuZL9&#43;soZpIJHybk6Z233ws="></script>

<script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" integrity="sha256-b2&#43;Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC&#43;NdcPIvZhzk="></script>
<link rel="alternate" type="application/rss+xml" href="https://www.macaronios.org/docs/mark/index.xml" title="Macaroni OS" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head><section class="top-bar animated-header">
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<nav class="navbar navbar-expand-lg navbar-light bg-light">
					<a class="navbar-brand" href="https://www.macaronios.org/">
						<img src="https://www.macaronios.org/images/logo.png" alt="Macaroni OS">
					</a>
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
						aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>

					<div class="collapse navbar-collapse" id="navigation">
						<ul class="navbar-nav ml-auto">
							
							<li class="nav-item">
								<a class="nav-link"
									href="https://www.macaronios.org/">Home</a>
							</li>
							
							
							
							<li class="nav-item">
								<a class="nav-link"
									href="https://www.macaronios.org/contact">Contacts</a>
							</li>
							
							
							
							<li class="nav-item">
								<a class="nav-link"
									href="https://www.macaronios.org/blog">Blog</a>
							</li>
							
							
							
							<li class="nav-item">
								<a class="nav-link"
									href="https://www.macaronios.org/iso/">Download</a>
							</li>
							
							
							
							<li class="nav-item">
								<a class="nav-link"
									href="https://www.macaronios.org/blog/phoenix-25.06/">Phoenix 25.06 Released!</a>
							</li>
							
							
							
							<li class="nav-item">
								<a class="nav-link"
									href="https://www.macaronios.org/docs">Documentation</a>
							</li>
							
							
						</ul>
					</div>
				</nav>
			</div>
		</div>
	</div>
</section><body dir="ltr">

  <div style="margin-top: 60px;">

  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>

<div class="book-search">
  <input type="text" id="book-search-input" placeholder="" aria-label="" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  <ul>
<li>
  <a href="/docs/"><strong>The Project</strong></a>
<ul>
<li>
  <a href="/docs/#macaroni-releases">Macaroni Releases</a></li>
</ul>
</li>
<li>
  <a href="/docs/mark/"class=active><strong>M.A.R.K.</strong></a></li>
<li>
  <a href="/docs/sambuca/"><strong>Sambuca Anise Stack</strong></a>
<ul>
<li>
  <a href="/docs/sambuca/#macaroni-os-phoenix">Phoenix</a></li>
<li>
  <a href="/docs/sambuca/#macaroni-os-eagle">Eagle</a></li>
<li>
  <a href="/docs/sambuca/#macaroni-os-terragon">Terragon</a></li>
<li>
  <a href="/docs/sambuca/#macaroni-repositories">Anise Repositories</a></li>
<li>
  <a href="/docs/sambuca/#macaroni-tags">Macaroni Tags</a></li>
</ul>
</li>
<li>
  <a href="/docs/story/"><strong>The Story</strong></a></li>
<li>
  <a href="/docs/getting-started/"><strong>Getting Started</strong></a>
<ul>
<li>
  <a href="/docs/getting-started/#install-macaroni-iso">Install Macaroni ISO</a></li>
<li>
  <a href="/docs/getting-started/#install-macaroni-lxd-containers">Install Macaroni LXD Containers</a></li>
<li>
  <a href="/docs/getting-started/#install-macaroni-incus-containers">Install Macaroni Incus Containers</a></li>
<li>
  <a href="/docs/getting-started/#install-macaroni-docker-containers">Install Macaroni Docker Containers</a></li>
<li>
  <a href="/docs/networking/">Networking</a></li>
</ul>
</li>
<li>
  <a href="/docs/pms/"><strong>Anise</strong></a>
<ul>
<li>
  <a href="/docs/pms/#1-repositories-or-wagons">Repositories or Wagons</a></li>
<li>
  <a href="/docs/pms/#2-subsets">Subsets</a></li>
<li>
  <a href="/docs/pms/#3-search-packages">Search Packages</a></li>
<li>
  <a href="/docs/pms/#4-install-packages">Install Packages</a></li>
<li>
  <a href="/docs/pms/#6-uninstall-packages">Uninstall Packages</a></li>
<li>
  <a href="/docs/pms/#7-upgrade-the-system">Upgrade System</a></li>
<li>
  <a href="/docs/pms/#91-show-files-owned-by-a-specific-package">Show files owned by a specific package</a></li>
<li>
  <a href="/docs/pms/#92-resolve-what-package-a-file-belongs-to">Resolve what package a file belongs to</a></li>
<li>
  <a href="/docs/pms/#93-show-orphans-packages">Show orphans Packages</a></li>
<li>
  <a href="/docs/pms/#10-local-database-operations">Local Database Operations</a></li>
<li>
  <a href="/docs/pms/#11-masking-packages">Masking Packages</a>
<br /></li>
</ul>
</li>
</ul>
<br />






  
<ul>
  
  <li>
    <a href="/blog/" >
        Blog
      </a>
  </li>
  
  <li>
    <a href="https://github.com/macaroni-os" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page" >
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>MARK Stack</strong>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
  <article class="markdown"><h1 id="mark-stack-or-mark-os">
  M.A.R.K. Stack or M.A.R.K. OS
  <a class="anchor" href="#mark-stack-or-mark-os">#</a>
</h1>
<p>The <strong>M.A.R.K.</strong> ( <strong>M</strong>acaroni <strong>A</strong>utomated <strong>R</strong>epositories <strong>K</strong>it ) <em>stack</em> could be see
like a source-based OS with a name that reference the technologies used for his building,
the automation that wants introduce and an acronym that reference the Iron Man Armor.
The softwares change so fastly and to keep a system updates
begin very hard for a distro. In MARK starting from the idea used in Funtoo, we want
improve the automation and the pipeline of delivery of the packages in order to balance the
speed and the choice of upgrading particular services and/or packages.</p>
<p>So, the main keys of MARK are:</p>
<ol>
<li>
<p><em>automation</em>: to reduce the effort on updates packages and keep the system updates is one of
the main target. Automatic updates obviously will not be always easy to manage and a
maintenance activity will be always needed, but the first target is try to reduce this
effort and have a way to automatically receive news about the new versions. To do this,
we use the <code>mark-devkit</code> tool that permits to define YAML file used to autogen new ebuild
based on templates and to manage the comparition of ebuilds without kits and/or overlay
available through Git repositories. The updates could be sent through direct commits
or through Github PR.</p>
</li>
<li>
<p><em>dynamicity</em>: one of the pros of Gentoo and Funtoo is the easy way to add patches to
upstream sources, at the same way we want follow this pattern and try to share an OS
that is a good place for developers.</p>
</li>
<li>
<p><em>reproducibility</em>: share technologies, how to configure it and using Opensource is one
of the core and more important key of MARK OS. Without sharing the knowledge this world
will never grow. So, another important point a bit complex, for a lot of reason and just
for for the volume of the documentation will be sharing our <em>Distro from Scratch</em> steps
used in MARK.</p>
</li>
</ol>
<p>Now the we have described the main principles under this stack it&rsquo;s time to describe
how the magic is started and how will be improved.</p>
<p>After the Funtoo shutdown in August 2024, Macaroni OS thanks to the support of the ex-Funtoo
developers decides to start a new adventure to keep the system independent from other distro
in order to have a better control of the system and avoid that external changes could be
dangerous in the Macaroni OS itself. Obviously, starting from zero was not possible, and so,
based of the expirience get in Funtoo we have applied the first changed to the <em>metatools</em>,
<em>ego</em> needed to create the base for what is been developed in one year and that will be evolved
again in the future. But having a clear target, trying to join the two worlds and create a gate
between the Anise/binary stack and the sourced-based world of MARK. But not only this, the
Portage itself it&rsquo;s a software created in Gentoo that will be replaced too in the future or at
least we hope on this. Working on our free time doesn&rsquo;t permit to share specific dates and/or
milestone so what we can share is at least the plan.</p>
<p>Through this vision we are been really lucky to find our Sponsors, really thanks always for their
support, and thourgh them we also oriented the development of our tools to be more connected to
their technologies in order to share the better experience possible to our users.</p>
<p>For this reason, the <code>mark-devkit</code> tool that is the main (but not the only) module used to keep
the distfiles server updated is been developed to have a better integration with Object Store S3
exposed in <strong>CDN77</strong>.</p>
<p>Before enter in the details of our releases we want try to compare Gentoo, Funtoo and MARK
in order to help users from these distro to understand the differences:</p>
<h2 id="-mark-vs-gentoo-vs-funtoo">
  🚀 MARK vs Gentoo vs Funtoo
  <a class="anchor" href="#-mark-vs-gentoo-vs-funtoo">#</a>
</h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th><strong>Gentoo</strong></th>
<th><strong>Funtoo</strong></th>
<th><strong>MARK</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Package management</strong></td>
<td><code>emerge</code></td>
<td><code>emerge</code></td>
<td><code>emerge</code> and <code>anise</code> + <code>anise-portage-converter</code></td>
</tr>
<tr>
<td><strong>Portage format</strong></td>
<td>Monolitic tree + external overlays</td>
<td>Kits with main release</td>
<td>Kits with different branches, different targets and different stability levels.</td>
</tr>
<tr>
<td><strong>Software distribution</strong></td>
<td>Pure source-based + xpak</td>
<td>Source-based with curated kits + xpak</td>
<td>Source-based with curated kits + xpak and anise binary packages</td>
</tr>
<tr>
<td><strong>Profiles/config</strong></td>
<td>Portage profiles (<code>eselect profile</code>)</td>
<td><code>ego</code> + mix-ins / arch / flavor</td>
<td><code>ego</code> + mix-ins / arch / flavor (replaced with mark soon)</td>
</tr>
<tr>
<td><strong>System updates</strong></td>
<td><code>emerge --sync &amp;&amp; emerge -avuDU @world</code></td>
<td><code>ego sync &amp;&amp; emerge -avuDU @world</code></td>
<td><code>ego sync &amp;&amp; emerge -avuDU @world</code> or <code>anise upgrade --sync-repos</code></td>
</tr>
<tr>
<td><strong>NVIDIA Drivers</strong></td>
<td>Single SLOT installation</td>
<td>Single SLOT installation</td>
<td>multi slotted autogen managed by <code>gpu-configurator</code> tool.</td>
</tr>
<tr>
<td><strong>initramfs generator</strong></td>
<td>genkernel</td>
<td>ramdisk</td>
<td>dracut</td>
</tr>
<tr>
<td><strong>Ebuild generator</strong></td>
<td>-</td>
<td>metatools</td>
<td><code>mark-devkit autogen</code>, <code>mark-devkit kit merge</code></td>
</tr>
<tr>
<td><strong>Stage tarballs generator</strong></td>
<td><code>catalyst</code></td>
<td><code>metro</code></td>
<td><code>mark-devkit metro</code></td>
</tr>
<tr>
<td><strong>Stability level assurance</strong></td>
<td>single tree where using KEYWORDS and portage.mask</td>
<td>single tree fully autogen with KEYWORDS and portage.mask</td>
<td>multiple versions for every package, portage.mask and different branches with different stability levels</td>
</tr>
<tr>
<td><strong>Installer</strong></td>
<td>manual</td>
<td>manual</td>
<td>calamares</td>
</tr>
</tbody>
</table>
<h3 id="portage">
  Portage
  <a class="anchor" href="#portage">#</a>
</h3>
<p>At the moment, it uses a forked version of Portage with patches from Funtoo as main package
manager system but with an eye for improve integration with <code>anise</code> and the Macaroni binary
layer.</p>
<p>The Macaroni Portage fork follow the Funtoo/Gentoo paradigm where is used the ebuild to describe
the steps to compile and install a package and different repositories (the <em>kits</em>) where aggregate specific
packages for example about server services, networking, etc.</p>
<p>Using different branches ensure different levels of stability already and so the behaviour of the
<em>KEYWORDS</em> variable used in Gentoo is less important, indeed, normally we use the value
<code>*</code> and in the future could be probably removed.</p>
<p>In a different way respect Gentoo and Funtoo, MARK doesn&rsquo;t generate the overlay metadata cache
directly in the exposed repository. The main reason is that is more simple to manage in an
upgrade workflow based on Github PR that could be merged, reverted, etc. without introduce jobs
to update costantly the same repository that receive the update of the package, etc.
Without the metadata the <em>emerge</em> solver could be slow, but this could be solved
with the execution of the command:</p>
<pre tabindex="0"><code>$&gt; # As root user
$&gt; for i in $(ls -1 /var/git/meta-repo/kits/) ; do egencache --update --repo=$i ; done
</code></pre><p>This step is temporary and managed automatically in the near future from the replacer of
the <code>ego</code> tool.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





  <div>
    <a class="flex align-center" href="https://github.com/macaroni-os/macaroni-site/edit/master/site/content/docs/mark/_index.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span></span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  </main>

  

  </div><!-- Footer Section Start -->
<footer id="footer">
  <div class="container">
    <div class="row content-justify-between">
      <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
        <p class="copyright">Copyright:
          <span>
            <script>
              document.write(new Date().getFullYear())
            </script>
          </span> Daniele Rondina All Rights Reserved
        </p>
      </div>
      <div class="col-md-4 col-12">
        <!-- Social Media -->
        <ul class="social text-center text-md-right text-lg-right">
          
          <li><a href="https://github.com/macaroni-os"><i class="ion-social-github"></i></a></li>
          
          <li><a href="https://discord.gg/AMuVCRZEvG"><i class="ion-chatbox"></i></a></li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://www.macaronios.org/plugins/jQurey/jquery.min.js"></script>
<!-- slick slider -->
<script src="https://www.macaronios.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://www.macaronios.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- wow js -->
<script src="https://www.macaronios.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://www.macaronios.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://www.macaronios.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://www.macaronios.org/js/script.min.js"></script>
<!-- google analitycs -->
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'Your ID', 'auto');
  ga('send', 'pageview');
</script>
</body>

</html>












